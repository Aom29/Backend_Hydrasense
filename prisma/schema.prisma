generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}
  
// =======================
// Modelo Account
// =======================
model Account {
  account_id Int      @id @default(autoincrement())
  email      String   @unique                     
  password   String                               
  role       String   @default("USER_ROLE") 
  email_validated Boolean @default(false)     
  created_at DateTime @default(now())            

  profiles  Profile[]
}

model Profile {
  profile_id String @id @default(uuid()) @db.Uuid
  name  String
  
  weight Float?
  height Float?
  img String?

  birthdate DateTime @default(now())
  is_primary Boolean @default(false)
  created_at DateTime @default(now())

  account Account @relation(fields: [account_id], references: [account_id]) 
  account_id Int

  device Device?
}

model Device {
  device_id String @id @default(uuid()) @db.Uuid
  device_name String 
  connected_at DateTime @default(now())

  profile Profile? @relation(fields: [profile_id], references: [profile_id])
  profile_id String? @unique @db.Uuid
}